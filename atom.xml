<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[lolgramming]]></title>
  <link href="http://kamoh.github.io/atom.xml" rel="self"/>
  <link href="http://kamoh.github.io/"/>
  <updated>2014-10-25T00:22:28-04:00</updated>
  <id>http://kamoh.github.io/</id>
  <author>
    <name><![CDATA[Ben Serviss]]></name>
    <email><![CDATA[ben@benserviss.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Encoding Messages in Fake Spam Using Polymorphic Interfaces]]></title>
    <link href="http://kamoh.github.io/blog/2014/10/21/secret-codes-in-spam/"/>
    <updated>2014-10-21T12:05:23-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/10/21/secret-codes-in-spam</id>
    <content type="html"><![CDATA[<p>There&rsquo;s something interesting about spam. I&rsquo;m not talking about the barrage of poorly-disguised junk mail everbody gets &ndash; I&rsquo;m talking about the special kind of spam that combines just the right amount of unlikely phrase pairings and absurdist imagery to create a new kind of confusion unique to the modern age.</p>

<p style="text-align:center;"><img class="right" src="http://kamoh.github.io/images/102314/great-spam.png" width="500" title="Some great spam." ></p>

<p>A few weeks ago, I made a <a href="http://www.webopedia.com/TERM/S/steganography.html">steganography</a> project, <a href="http://www.spamencoder.com/">SpamEncoder</a>, using this caliber of &lsquo;spam as art&rsquo; as the medium to hide secret messages in.</p>

<p>It&rsquo;s really simple to use &ndash; you just put the message you want to hide in the &lsquo;Encode&rsquo; field, then press the button to instantly produce a coded version of the message. When you want to decode it, just copy the text in the &lsquo;Decode&rsquo; field and press that button. Couldn&rsquo;t be simpler!</p>

<p>However, getting this to work just how I wanted was a little trickier. Here&rsquo;s how I did it.</p>

<h1>Step 1: Case Statement</h1>

<p>For the very first version of the app, I wanted to get something working as quickly as possible. Once I had a prototype up, it&rsquo;d be much easier to see where the issues and unexpected problems would come from.</p>

<p>The first incarnation was a straight letter substitution, using a hideous case statement to swap out each letter of the original message for a new encoded word.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="c1"># Encode method</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">encode_letter_replace</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">letter</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;a&quot;</span>
</span><span class='line'>      <span class="s2">&quot;cialis &quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;b&quot;</span>
</span><span class='line'>      <span class="s2">&quot;loans &quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;c&quot;</span>
</span><span class='line'>      <span class="s2">&quot;enhancement &quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;d&quot;</span>
</span><span class='line'>      <span class="s2">&quot;pills &quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;e&quot;</span>
</span><span class='line'>      <span class="s2">&quot;sale &quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;f&quot;</span>
</span><span class='line'>      <span class="s2">&quot;nigeria &quot;</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Decode method</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">message_reverse_engineer</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;cialis &quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;loans &quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;enhancement &quot;</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;pills &quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;sale &quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="s2">&quot;nigeria &quot;</span><span class="p">,</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Despite being as clunky as possible, it worked well enough to prove out the concept and bring a few issues to light I hadn&rsquo;t anticipated:</p>

<p>  <strong>1. The algorithm would need to handle lowercase and uppercase letters, as well as some special characters;</strong></p>

<p>  <strong>2. Challenges in swapping out individual characters with spam phrases instead of single spammy words; and</strong></p>

<p>  <strong>3. Preserving carriage returns in the original message.</strong></p>

<p>Handling lowercase and uppercase letters was easy &ndash; I just added different phrase substitutions for all 52 case variations of the English alphabet, plus a few of the more common special characters. The others, however, were much more interesting.</p>

<h1>2. Polymorphic Phrase Library</h1>

<p>Replacing single characters with encoded phrases took a fair chunk of time to nail down. While the first version duplicated the entire character/spam word key in both the encode and decode methods, any time I made a change to one method chain, the other would break.</p>

<p>After working on this for a bit, I realized that a &lsquo;phrase library&rsquo; store made the most sense. Using a hash for the data structure meant I could remove all duplication and condense the phrase library into just one method.</p>

<p>Depending on the operation the user wanted to do, this method could return either an encoded phrase for a character to be encoded, or the original character for all occurrences of a given spam phrase. I&rsquo;ll come back to this in a bit.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">library</span><span class="p">(</span><span class="n">input</span><span class="p">)</span> <span class="c1"># takes a hash of either { letter: letter } or { message: message } key value pair</span>
</span><span class='line'>  <span class="n">phrase_library</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;hilarious spam phrase 1 &quot;</span><span class="p">,</span><span class="s2">&quot;mildly alumsing spam phrase 2 &quot;</span><span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;b&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;delightful spam phrase 3 &quot;</span><span class="p">,</span><span class="s2">&quot;hackneyed spam phrase 4&quot;</span><span class="o">]</span><span class="p">,</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<h1>3. Preserving Carriage Returns</h1>

<p>The last issue was something I dealt with almost as soon as the first version started working. Because the <code>encode</code> operation strips out all spaces in the message so it can iterate over each character and make the substitutions, I was losing any carriage returns the user included in the original message. Since my goal was to preserve the original message completely, including superfluous carriage returns, this wouldn&rsquo;t do.</p>

<p>To handle this, the program replaces all <code>\n</code> returns with the ♤ UTF-8 character, which is then replaced with spam phrases just like any other character. When decoding, the phrases associated with the spade character are replaced with the spade, then finally replaced with <code>\n</code> characters right before the whole message is restored to its decoded form and output back to the user.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">message</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;‡&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/\n/</span><span class="p">,</span><span class="s2">&quot;♤&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">letter</span><span class="o">|</span> <span class="c1"># replacing all spaces and carriage returns with temp characters</span>
</span><span class='line'>  <span class="c1"># encode each individual character of the message</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h1>4. Random Phrase Selection</h1>

<p>Everything was looking good, except for one final problem. If you encoded a message, then added just one more character (or even a short word), it would just append more phrases to the existing encoded message. This wasn&rsquo;t good enough! Even if you just changed one character, the decoded message should be totally different.</p>

<p>Solving this last problem turned out well. I couldn&rsquo;t use a random number to select which phrase to use to replace a character, since it would introduce an element of randomness that felt out of place in a formalized cryptography system.</p>

<p>Instead, I relied on an obvious constant &ndash; the length of the message.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># in initialize, set the message text to @message and set the @message_length_key</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">message_input</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@message</span> <span class="o">=</span> <span class="n">message_input</span>
</span><span class='line'>  <span class="vi">@message_length_key</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">to_s</span><span class="o">[-</span><span class="mi">1</span><span class="o">].</span><span class="n">to_i</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># in the encode method, iterate over each character in the message and replace each with a phrase</span>
</span><span class='line'>  <span class="n">message_length_key</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># increment the key for selecting phrases</span>
</span><span class='line'>  <span class="n">message_length_key</span> <span class="o">-=</span> <span class="mi">11</span> <span class="k">if</span> <span class="n">message_length_key</span> <span class="o">&gt;</span> <span class="mi">9</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># in the library method</span>
</span><span class='line'><span class="c1"># if sending a character to the library to be encoded, we need to return a phrase</span>
</span><span class='line'>
</span><span class='line'><span class="n">character</span> <span class="o">=</span> <span class="n">input</span><span class="o">[</span><span class="ss">:letter</span><span class="o">]</span> <span class="k">if</span> <span class="n">input</span><span class="o">[</span><span class="ss">:letter</span><span class="o">]</span>
</span><span class='line'><span class="k">if</span> <span class="n">character</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">!</span><span class="n">phrase_library</span><span class="o">[</span><span class="n">character</span><span class="o">].</span><span class="n">nil?</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">phrase_library</span><span class="o">[</span><span class="n">character</span><span class="o">][</span><span class="n">message_length_key</span><span class="o">]</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">character</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># otherwise, we have a message to be decoded, and we need the original character in the key</span>
</span><span class='line'>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">phrase_library</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">char</span><span class="p">,</span><span class="n">phrase_list</span><span class="o">|</span>
</span><span class='line'>    <span class="n">phrase_list</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">phrase</span><span class="o">|</span>
</span><span class='line'>      <span class="n">message</span><span class="o">.</span><span class="n">gsub!</span><span class="p">(</span><span class="n">phrase</span><span class="p">,</span><span class="n">char</span><span class="p">)</span> <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">phrase</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">message</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>When encoding, the <code>message_length_key</code> variable is initialized with the last digit of the length of the message. Then, for every character substitution, the key increases by one. Since I only wrote/found 10 spam phrases for each character, a check runs on <code>message_length_key</code> for every loop and reduces the value if it every gets too high.</p>

<p>And that&rsquo;s it! It was a pretty fun project, and a good excuse to see what some challenges are when developing crytography systems. Plus, writing lots of gibberish turns out to be pretty fun.</p>

<p>The whole thing&rsquo;s open sourced and up on github here: <a href="https://github.com/kamoh/spam-encoder">https://github.com/kamoh/spam-encoder</a></p>

<p>sign your pitty virtuous checkboox thousands dogs chasing squirrels in TARGET&nbsp;</p>

<p>dungeons and potlucks i am real person plus homelessness accreditation pine cone living wage certainly, &ndash;</p>

<p>bagels, and severe windblown acne. Chris is dead, Job for you! more and bots have been replaced with people new flavor? Pepsi Google told me in whispers the truth savings, a bust iced tea and beverage rappers opportunity of a lifetime, my bagels, and denial of sunrise attack textile gremlins eating more and&nbsp;</p>

<p>classifieds? Job now on website valley of the getting rich quick was dead? explicit, yet full of romance filed in slowly, all</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Creating Cities with Worldview]]></title>
    <link href="http://kamoh.github.io/blog/2014/10/06/making-worldview/"/>
    <updated>2014-10-06T13:58:11-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/10/06/making-worldview</id>
    <content type="html"><![CDATA[<p><a href="http://www.world-view.today">Worldview</a> is a project I worked on with the inimitable <a href="http://ambertunnell.github.io/">Amber Tunnell</a>, <a href="http://www.korenlc.com/">Koren Leslie Cohen</a> and <a href="http://ewarren7.github.io">Edward Warren</a>. The idea is to give you an instant snapshot of what it&rsquo;s like in nearly any city in the world, pulling major news, pictures, weather and tweets related to the location.</p>

<p><a href="http://www.world-view.today"></p>

<p style="text-align:center;"><img class="right" src="http://kamoh.github.io/images/10614/worldview-main-sm2.png" title="worldview" ></p>

<p></a></p>

<p>The coolest part (in my opinion) is that you can add almost any city you want! Just type it into the input field and the site generates a clock depicting the city&rsquo;s current local time. When you click the clock, the entire site updates with the city&rsquo;s info.</p>

<p>The process of adding cities was one of my favorite parts of making this thing, and here&rsquo;s how we did it.</p>

<h1>Frontend Validation</h1>

<p>When you first type in a new city, light validation on the JavaScript end checks to make sure what you typed in meets the bare minimum criteria to initiate the API call to Weather Underground &ndash; namely that the field isn&rsquo;t empty and that it doesn&rsquo;t contain a number.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">function</span> <span class="n">submit_new_city</span><span class="p">(</span><span class="n">passedInput</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">passedInput</span> <span class="o">!==</span> <span class="n">undefined</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">var</span> <span class="n">user_input</span> <span class="o">=</span> <span class="n">passedInput</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="p">(</span><span class="s2">&quot;#new-city&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="err">$</span><span class="p">(</span><span class="s2">&quot;#invalid_city&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;Input must not be blank&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="kp">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">parseInt</span><span class="p">(</span><span class="err">$</span><span class="p">(</span><span class="s2">&quot;#new-city&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">())</span> <span class="o">*</span> <span class="mi">0</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="err">$</span><span class="p">(</span><span class="s2">&quot;#invalid_city&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;Letters only, please&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="kp">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">var</span> <span class="n">user_input</span> <span class="o">=</span> <span class="err">$</span><span class="p">(</span><span class="s2">&quot;#new-city&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The optional <code>passedInput</code> argument that the <code>submit_new_city</code> function takes is used to generate the first five cities when you initially load the page, so it can bypass this validation.</p>

<h1>API Results Validation</h1>

<p>Once the request is accepted past the initial validation, it&rsquo;s sent via Ajax call to Weather Underground&rsquo;s awesome autocomplete API. You don&rsquo;t even have to send the complete name of the city &ndash; the API will return the best guess it comes up with! This is undoubtedly useful, but there are still a few wrinkles.</p>

<p>First, we make sure that there&rsquo;s something in the results array. For example, if you search for New Cheeseburger, you&rsquo;ll get an empty results array.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">findCityArray</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">RESULTS</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#invalid_city&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Please enter a valid city&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, the API includes countries as well as cities, so we have to screen for that.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// continued</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">RESULTS</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;country&quot;</span> <span class="o">||</span> <span class="nx">response</span><span class="p">.</span><span class="nx">RESULTS</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">lon</span> <span class="o">===</span> <span class="s2">&quot;-9999.000000&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#invalid_city&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Please enter a city and country&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally, there are a bunch of edge cases of non-city locations where weather readings are taken, like hospitals and heliports. There are also some alternate names for regions, like Hong Kong S.A.R. (Special Administrative Region), which is a different result than just Hong Kong, China.</p>

<p>To handle a few of these edge cases, we use a basic regex that we update as needed:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// continued</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">RESULTS</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(international|hospital|helistop|S\.A\.R|de Olivenca|do Potengi)/i</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">findCityArray</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the initial result isn&rsquo;t blank, but it doesn&rsquo;t meet the criteria here, we send another recursive <code>findCityArray</code> call to return the next element in the results API.</p>

<h1>Backend Validation</h1>

<p>Once we have valid city information, it&rsquo;s time to hit the server. The aim here is to send the city info to the server via Ajax and create or find a city object that we&rsquo;ll use to create a new clock that the user can click on.</p>

<p>To do this, we send a POST request to the corresponding controller in Rails, which does exactly this &ndash; finding the user (if logged in) and making or finding the city.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">session</span><span class="o">[</span><span class="ss">:user_id</span><span class="o">]</span><span class="p">)</span> <span class="k">if</span> <span class="n">session</span><span class="o">[</span><span class="ss">:user_id</span><span class="o">]</span>
</span><span class='line'><span class="vi">@city</span> <span class="o">=</span> <span class="no">City</span><span class="o">.</span><span class="n">find_or_create_by</span><span class="p">(</span><span class="ss">lat</span><span class="p">:</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:lat</span><span class="o">]</span><span class="p">,</span> <span class="ss">lon</span><span class="p">:</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:lon</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">city</span><span class="o">|</span>
</span><span class='line'>  <span class="n">city</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>
</span><span class='line'>  <span class="n">city</span><span class="o">.</span><span class="n">bigger_thing</span> <span class="o">=</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:bigger_thing</span><span class="o">]</span>
</span><span class='line'>  <span class="n">city</span><span class="o">.</span><span class="n">country</span> <span class="o">=</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:country</span><span class="o">]</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">!</span><span class="vi">@user</span> <span class="c1">#create a temp user tied to session ID</span>
</span><span class='line'>  <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Guest&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">provider</span><span class="p">:</span> <span class="s1">&#39;anon&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">uid</span><span class="p">:</span> <span class="n">session</span><span class="o">[</span><span class="ss">:session_id</span><span class="o">]</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">image</span><span class="p">:</span> <span class="s1">&#39;https://origin.ih.constantcontact.com/fs197/1110193228531/img/301.jpg?a=1115291249439&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@user</span><span class="o">.</span><span class="n">cities</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="no">City</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
</span><span class='line'>                   <span class="no">City</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                   <span class="no">City</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
</span><span class='line'>                   <span class="no">City</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
</span><span class='line'>                   <span class="no">City</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">]</span>
</span><span class='line'>  <span class="n">session</span><span class="o">[</span><span class="ss">:user_id</span><span class="o">]</span> <span class="o">=</span> <span class="vi">@user</span><span class="o">.</span><span class="n">id</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another cool thing here &ndash; if the user is not logged in but adds a city, we then create a temporary user and track the different cities they&rsquo;re using the session cookie. If this anonymous user decides to log in with their Twitter account, we update this anonymous user&rsquo;s info in the database with their real Twitter info and also import his cities from the session cookie into the new user&rsquo;s account. Edward took the lead on this feature, and you can read more about it on <a href="http://ewarren7.github.io/blog/2014/09/24/allowing-temporary-anonymous-user/">his blog</a>.</p>

<p>In the controller, we also return the ID of the clock to be removed (<code>del_city_id</code>) from the page to make room for the new one.</p>

<p>Finally, there&rsquo;s one last bit of validation: If the clock is already being displayed on the page, we show an error message to this effect and don&rsquo;t update the page.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">unless</span> <span class="vi">@user</span><span class="o">.</span><span class="n">cities</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="ss">lat</span><span class="p">:</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:lat</span><span class="o">]</span><span class="p">,</span> <span class="ss">lon</span><span class="p">:</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:lon</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@user</span><span class="o">.</span><span class="n">cities</span> <span class="o">&lt;&lt;</span> <span class="vi">@city</span> <span class="k">if</span> <span class="vi">@user</span>
</span><span class='line'>  <span class="n">del_city_id</span> <span class="o">=</span> <span class="n">city_params</span><span class="o">[</span><span class="ss">:lastClock</span><span class="o">].</span><span class="n">to_i</span>
</span><span class='line'>  <span class="no">CityUser</span><span class="o">.</span><span class="n">find_by</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="vi">@user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">city_id</span><span class="p">:</span> <span class="n">del_city_id</span><span class="p">)</span><span class="o">.</span><span class="n">destroy</span> <span class="k">if</span> <span class="vi">@user</span>
</span><span class='line'>  <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@city</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="s2">&quot;this city already exists&quot;</span><span class="o">.</span><span class="n">to_json</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Otherwise, we return the city object back to JavaScript, call the <code>makeClock</code> function to create the city&rsquo;s clock, and we&rsquo;re done!
<a href="https://twitter.com/queens_js/status/517469989369311232"></p>

<p style="text-align:center;"><img src="http://kamoh.github.io/images/10614/queens_js_sm.png" title="worldview" ></p>

<p></a></p>

<center><i>The four of us presenting the site at <a href="http://www.meetup.com/QueensJS/">QueensJS</a>!</i></center>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Binary Search Trees in Ruby]]></title>
    <link href="http://kamoh.github.io/blog/2014/08/23/binary-search-trees-in-ruby/"/>
    <updated>2014-08-23T13:58:05-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/08/23/binary-search-trees-in-ruby</id>
    <content type="html"><![CDATA[<p>There&rsquo;s never a lack of options for ways to store data. Depending on the type of data you&rsquo;re dealing with, you could do much worse than a binary search tree.</p>

<p>The concept behind binary search trees is simple.</p>

<ol>
<li><p>The tree is node based, and a new tree is initialized with a root node. This node has a value, a left space, and a right space. Both left and right spaces are empty to begin with.</p></li>
<li><p>When you want to add a new node, the tree compares the value of the new node to the value of the root node.</p></li>
<li><p>If the new node&rsquo;s value is less than the root&rsquo;s value, it&rsquo;s stored in the root node&rsquo;s left space. If there&rsquo;s already a node there, then compare against that node and repeat.</p></li>
<li><p>If the new node&rsquo;s value is greater than the root&rsquo;s value, it&rsquo;s stored in the root node&rsquo;s right space. If there&rsquo;s already a node there, then compare against that node and repeat.</p></li>
</ol>


<p style="text-align:center;"><img class="right" src="http://kamoh.github.io/images/82314/binary_search_tree.png" title="'Binary search tree" ></p>

<p>That&rsquo;s it!</p>

<p>Things get a little more complex once the tree starts to fill out, and the algorithm has to continue traversing down each branch of the tree to find the perfect spot for your new node.</p>

<p>There&rsquo;s also the question of inserting nodes with duplicate values. While it&rsquo;s strongly recommended to exclude duplicate values from a binary search tree, you can elect to store them to the left (by allowing less than or equal to nodes) or right (by allowing greater than or equal to nodes). If you do allow this, you run the risk of creating an unbalanced tree with different numbers of branches on either side.</p>

<p>One way of implementing binary search trees in Ruby is with two separate classes: one for the tree itself and one for the node objects that populate it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">BST</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:data</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@root</span> <span class="o">=</span> <span class="no">Node</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@sorted_data</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@root</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">traverse</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="vi">@root</span><span class="p">)</span>
</span><span class='line'>    <span class="n">traverse</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span>
</span><span class='line'>    <span class="vi">@sorted_data</span> <span class="o">&lt;&lt;</span> <span class="n">node</span><span class="o">.</span><span class="n">data</span>
</span><span class='line'>    <span class="n">traverse</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">right</span>
</span><span class='line'>    <span class="vi">@sorted_data</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Node</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:data</span><span class="p">,</span> <span class="ss">:left</span><span class="p">,</span> <span class="ss">:right</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@data</span> <span class="o">=</span> <span class="n">data</span>
</span><span class='line'>    <span class="vi">@left</span> <span class="o">=</span> <span class="kp">nil</span>
</span><span class='line'>    <span class="vi">@right</span> <span class="o">=</span> <span class="kp">nil</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="n">new_node</span> <span class="o">=</span> <span class="no">Node</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">new_node</span><span class="o">.</span><span class="n">data</span> <span class="o">&lt;</span> <span class="n">data</span> <span class="o">&amp;&amp;</span> <span class="n">left</span><span class="o">.</span><span class="n">nil?</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">new_node</span>
</span><span class='line'>    <span class="k">elsif</span> <span class="n">new_node</span><span class="o">.</span><span class="n">data</span> <span class="o">&lt;</span> <span class="n">data</span>
</span><span class='line'>      <span class="n">left</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="k">elsif</span> <span class="n">right</span><span class="o">.</span><span class="n">nil?</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">new_node</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">right</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you use the insert method on the tree to add new nodes, it filters down to the insert instance method on the root node, then recursively calls itself on each child node as it searches for an empty place to attach the new node to the tree.</p>

<p>The traverse method also uses recursion to visit each node and add their values to an array, starting down the left-most node at the bottom of the tree and working its way over to the right-most node.</p>

<p>Binary search trees perform relatively well, with average time complexity of O(log(n)) for all operations and O(n) at their worst.</p>

<p>However, since the shape of the tree is wholly dependent on the order that new nodes are added, the overall structure of the tree may degrade over time after numerous deletions. Also, since tree traversal requires comparisons against each node, very large trees may rack up longer search times.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Utterly Insane Data Structures]]></title>
    <link href="http://kamoh.github.io/blog/2014/07/20/utterly-insane-data-structures/"/>
    <updated>2014-07-20T21:41:07-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/07/20/utterly-insane-data-structures</id>
    <content type="html"><![CDATA[<p>The process of learning something completely new is a strangely tiered experience. More than anything else, the past seven weeks have felt like falling down a very deep pit, and gradually climbing out. The tricky part is, since you&rsquo;re so focused on climbing up, you can&rsquo;t actually tell when you&rsquo;ve climbed past where you fell in &ndash; all you know is to keep going.</p>

<p>Once you get into this groove, it can start to feel comfortable. On the other hand, staying humble and keeping a beginner&rsquo;s mind is paramount to staying receptive and curious.</p>

<p>Which brings us to data structures!</p>

<p>At this point, I&rsquo;ve grown comfortable using the common data structures used in software. Arrays, hashes (objects in JS), stacks and queues seem like reasonable enough entities. Even binary search trees make sense, despite being more complicated to wrangle.</p>

<p>Which led me to thinking &ndash; are there any stranger data structures out there? Could there be odd classifications of information out there in the wild, their mysteries coiled tight inside dense documentation, waiting to be stuffed with bits?</p>

<p>Of course there are &ndash; this would be a pretty short blog post if there weren&rsquo;t!</p>

<h1>Bloom Filters</h1>

<p>The bloom filter is almost exactly what I was looking for &ndash; a bizarre, ungainly data structure with plenty of good points, and a few dashes of tragic weirdness.</p>

<p>Bloom filters bring a heaping helping of optimization to the table. Instead of storing long chunks of data verbatim into a hash table or some other literal configuration, they hold values in multiple places in memory in order to check for &lsquo;set membership,&rsquo; or whether your queried item belongs in the particular set being searched. This cuts down significantly on the memory required to store the structure, as well as the number of queries needed to find the result.</p>

<p>When you want to access a value, the bloom filter will check all of the memory locations associated with that search term, and if the return values are positive, it&rsquo;s a good indication that it exists.</p>

<p><a href="http://en.wikipedia.org/wiki/Bloom_filter#mediaviewer/File:Bloom_filter.svg"><img class="right" src="http://kamoh.github.io/images/72114/bloom_filter.png" title="Bloom filter by David Eppstein" ></a></p>

<p>Unfortunately, because memory locations are reused by multiple entries in the filter, it&rsquo;s possible to generate false positives depending on how many values are being stored.</p>

<p>Oh, and you can never delete anything ever, because the memory locations corresponding to the term may be in use by other values. So weird!</p>

<p>So what the heck do you use this for? Until about two years ago, the Chrome browser used a <a href="https://chromiumcodereview.appspot.com/10896048/">bloom filter to detect malicious URLs</a>. On the other hand, as of February 2014 Google appears to still use bloom filters to <a href="http://www.chromium.org/developers/design-documents/rappor">collect metrics stored from users</a>.</p>

<p>For more clarification, Cube Drone has a pretty good three.5 minute summary of how these things work:</p>

<p style="text-align:center;"><iframe width="560" height="315" src="//www.youtube.com/embed/-SuTGoFYjZs" frameborder="0" allowfullscreen></iframe></p>

<h1>Tries</h1>

<p>Pronounced &ldquo;tree&rdquo; (see? weird right off the bat), tries appear to ape the structure of binary search trees, but they&rsquo;re unique animals. While binary search trees reshuffle themselves to accommodate new values with respect to the current makeup of the tree, tries traverse an existing selection of data to return a specific value &ndash; which is where they get their name, from reTRIEval. Tries also specialize in text queries, which comes into play regarding their real-world use cases.</p>

<p style="text-align:center;"><img class="right" src="http://kamoh.github.io/images/72114/trie_actors.png" title="A trie, taken from rabblerabbleRubble's video (link below)" ></p>

<p>And because they are used to retrieve values instead of generating an updated order, they offer a space-saving alternative to hash tables and other basic data indexing structures.</p>

<p>So how do they work? Given a list of words that all start with the same few letters &ndash; like ace, actor and aces &ndash; the trie would list utilize a separate node for every letter, following all the way down until each traversal terminates in a final word.</p>

<p>If you&rsquo;re thinking that something like this would be good for spell-checking or autocomplete, you&rsquo;re right! Tries are generally used for such text-intensive scenarios.</p>

<p>rabblerabbleRubble on YouTube breaks down the concept in under two minutes:</p>

<p style="text-align:center;"><iframe width="420" height="315" src="//www.youtube.com/embed/Up7yEHUqN30" frameborder="0" allowfullscreen></iframe></p>

<h1>Skip Lists</h1>

<p>Skip lists are the coolest things in the world. Skip lists provide fast searching capabilities within an ordered series of elements, commonly numbers. In essence, skip lists compare a current element with other elements you&rsquo;ve previously inserted into your collection &ndash; including not only INFINITY on the right, but NEGATIVE FREAKING INFINITY on the left!</p>

<p><img class="right" src="http://kamoh.github.io/images/72114/skip_list_animated.gif" width="650" title="SO COOL" ></p>

<p>Once you&rsquo;ve slotted where an element is supposed to go, the element may or may not be &lsquo;promoted&rsquo; up to the next level of comparison based on a random decision by the search algorithm. Since some numbers don&rsquo;t get promoted, future selections can skip entire swaths of set data, speeding up the entire query time &ndash; thanks to the flip of a coin!</p>

<p>In other words: Skip lists don&rsquo;t care about what you just did. Skip lists don&rsquo;t care about your plans for the future of your little algorithm. Skip lists are gonna do skip lists just how skip lists likes it.</p>

<p style="text-align:center;"><img src="http://kamoh.github.io/images/72114/monster-truck-done.jpg" title="Skip lists will crush everything!" ></p>

<p>Skip lists are so cool that this video showing them in action, even though the narrator&rsquo;s voice is literally skipping because he set the speed too fast and the visual quality is near-abysmal, is by far a better explanation than any words I could provide.</p>

<p>Watch, enjoy &ndash; and learn.</p>

<p style="text-align:center;"><iframe width="420" height="315" src="//www.youtube.com/embed/y_xnC4B2wNQ" frameborder="0" allowfullscreen></iframe></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Curious Chairs of the Flatiron School]]></title>
    <link href="http://kamoh.github.io/blog/2014/07/06/the-curious-chairs-of-the-flatiron-school/"/>
    <updated>2014-07-06T19:17:32-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/07/06/the-curious-chairs-of-the-flatiron-school</id>
    <content type="html"><![CDATA[<p>The first time I walked into The Flatiron School, I thought to myself: &ldquo;What are these crazy orange things?&rdquo;</p>

<p>I had come to one of the weekly <a href="http://www.meetup.com/nyc-on-rails/">NYC on Rails</a> meetups in December of 2013 to check out the vibe and decide if I wanted to apply to the school&rsquo;s web development program. Strewn about the main meeting space were knee-high, accordion-esque bright orange&hellip; things.</p>

<p>Were they chairs? Were they stools? Were they the missing business ends of giant toddler-sized <a href="http://thumb9.shutterstock.com/display_pic_with_logo/710830/710830,1300264918,2/stock-photo-red-and-yellow-child-s-toy-hammer-73266583.jpg">toy hammers</a>?</p>

<p style="text-align:center;"><img class="left" src="http://kamoh.github.io/images/7614/nyc_on_rails_dec_13_meetup.jpg" width="450" title="NYC on Rails meetup in December, 2013. I'm in the middle (somewhere)." ></p>

<p>Spoiler: They turned out to be chairs. Ergonomic chairs, in fact, created by designer <a href="http://www.stylepark.com/en/designer/alan-heller">Alan Heller</a>. The <a href="http://www.ergoergo.com">ErgoErgo</a> chairs (as they&rsquo;re officially called) were designed to encourage active sitting, relying on the sittee&rsquo;s core muscles for stability as you rock gently back and forth.</p>

<p>Once I had gotten used to the concept, using the chair turned out to be fun in its own novel way. Figuring out how to best use the chair added a playful dimension in talking to the other meetuppers, helping ground the evening in a more open-minded mood.</p>

<p>Now that I&rsquo;m a full-time student at Flatiron, I&rsquo;ve noticed how easily my classmates have incorporated the chairs into their routines. Since they&rsquo;re so modular and light, it&rsquo;s easy to grab a few and turn any table into a lunch spot or meeting area, use one as a footrest, or even corral a bunch into a nifty nap corner. In just a matter of weeks, the ubiquity of these strange little chairs had become a given.</p>

<p>Cool, right? There&rsquo;s something else entirely that explains why these peculiar little chairs fit in so well here &ndash; and it&rsquo;s because <b>the entire process of encountering, evaluating, interacting and experimenting with them is a perfect metaphor for learning to program.</b></p>

<p><img class="right" src="http://kamoh.github.io/images/7614/nap_time.jpg" width="420" title="Sometimes, the call of the nap proves irresistible." ></p>

<p>Upon first glance, ErgoErgo doesn&rsquo;t look like any chair that belongs in an office setting &ndash; there&rsquo;s no back, they&rsquo;re too short, the shape is wrong, the color is far too bright &ndash; and you&rsquo;re immediately thrown out of your comfort zone, just as someone new to programming is quickly buried in confusion.</p>

<p>Then, as you figure out that it&rsquo;s just another type of chair, you try sitting on it and gradually learn how it operates &ndash; how much rocking you like, how much give each side allows, etc. This is analogous to the long acclimation phase of learning to program &ndash; deciphering what error messages mean, how data structures behave, what kind of commands are expected, and so forth.</p>

<p>Finally, as you accept ErgoErgo&rsquo;s new definition of what a chair can mean, you grow comfortable in its use &ndash; turning something that was strange and unfamiliar moments ago into something you totally understand. It goes without saying that the programming equivalent to this stage is rather long, but the metaphor is already complete. Something that once beguiled you as intimidating or impossible is now something eminently knowable, with time and experience the only obstacles to an increased understanding.</p>

<blockquote><p>The entire process of encountering, evaluating, interacting and experimenting with them is a perfect metaphor for learning to program.</p></blockquote>

<p>A major part of becoming a programmer is mental. The mental shift from &ldquo;I need a programmer to help me&rdquo; when faced with a technical problem to &ldquo;I can figure this out&rdquo; is an important one; the transition from being frustrated with code defects to being driven by curiosity to find the problem is critical in staying motivated to improve.</p>

<p>As much as I may be reading into this, and as off-the-wall a metaphor it may seem, having these odd chairs around as I&rsquo;m trying to mold myself into a programmer is a constant reminder that what may seem unfamiliar and alien one day may become familiar, welcome and fun the next.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Named Parameters: What's A Nice Keyword Argument Like You Doing in a Place Like This?]]></title>
    <link href="http://kamoh.github.io/blog/2014/06/20/named-parameters-whats-a-nice-keyword-argument-like-you-doing-in-a-place-like-this/"/>
    <updated>2014-06-20T00:29:30-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/06/20/named-parameters-whats-a-nice-keyword-argument-like-you-doing-in-a-place-like-this</id>
    <content type="html"><![CDATA[<p>In one of the labs from a few weeks ago, my Ruby class was introduced to named parameters, also known as keyword arguments. These parameters are defined in the method signature with a default value in the format (named_parameter: default_value).</p>

<p>Because their behavior appears similar to standard arguments with default values, most of us were mystified about their purpose. In Ruby, standard arguments with default values appear in the format (standard_argument=default_value). Take a look at the similarities:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">drink</span><span class="p">(</span><span class="ss">spirit</span><span class="p">:</span> <span class="s2">&quot;whiskey&quot;</span><span class="p">)</span> <span class="c1"># spirit = named parameter</span>
</span><span class='line'>    <span class="s2">&quot;Another </span><span class="si">#{</span><span class="n">spirit</span><span class="si">}</span><span class="s2"> for my friend here, barkeep.&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">drink</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;Another #{spirit} for my friend here, barkeep.&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">eat</span><span class="p">(</span><span class="n">snacks</span><span class="o">=</span><span class="s2">&quot;pretzels&quot;</span><span class="p">)</span> <span class="c1"># snacks = standard argument with default value</span>
</span><span class='line'>    <span class="s2">&quot;And some </span><span class="si">#{</span><span class="n">snacks</span><span class="si">}</span><span class="s2"> - I&#39;m famished!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">eat</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;And some pretzels - I&#39;m famished!&quot; </span>
</span></code></pre></td></tr></table></div></figure>


<p>As beginners, was there some use for them we just weren&rsquo;t grasping? Or were these named parameters just another option bestowed by the Ruby gods in order afford us more options when coding?</p>

<p>Looking at this in another perspective, if you try to call a standard method with arguments without using any, you get an error:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">drink</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
</span><span class='line'>    <span class="s2">&quot;Pour me a </span><span class="si">#{</span><span class="n">container</span><span class="si">}</span><span class="s2">, willya?&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">drink</span><span class="p">(</span><span class="s2">&quot;glass&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;Pour me a glass, willya?&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">drink</span>
</span><span class='line'>  <span class="c1">#=&gt; ArgumentError: wrong number of arguments (0 for 1)</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s logical to assume that named parameters would work the same way. Yet if you try this with a method with named parameters, it still runs &ndash; just like how standard parameters use default values for missing arguments!</p>

<p>While this is helpful to have, it&rsquo;s nothing that we can&rsquo;t do through default parameters.</p>

<p>Then we learned that named parameters don&rsquo;t care about the order in which you call them.</p>

<p>On one hand, neat trick!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">bootlegger</span><span class="p">(</span><span class="ss">distillery</span><span class="p">:</span> <span class="n">location</span><span class="p">,</span> <span class="ss">source</span><span class="p">:</span> <span class="n">location</span><span class="p">)</span>
</span><span class='line'>    <span class="s2">&quot;We smuggled the bourbon from </span><span class="si">#{</span><span class="n">source</span><span class="si">}</span><span class="s2">, but we brewed this moonshine in </span><span class="si">#{</span><span class="n">distillery</span><span class="si">}</span><span class="s2">. Dee-licious!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">bootlegger</span><span class="p">(</span><span class="ss">source</span><span class="p">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span> <span class="ss">distillery</span><span class="p">:</span> <span class="s2">&quot;Grandma&#39;s old bathtub&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;We smuggled the bourbon from Canada, but we brewed this moonshine in Grandma&#39;s old bathtub. Dee-licious!&quot; </span>
</span></code></pre></td></tr></table></div></figure>


<p>On the other hand, who cares? This feature is a nice wrinkle, but it doesn&rsquo;t really seem like it warrants the existence of the function.</p>

<p>After a little digging and experimentation, I finally found a reason why named parameters are worth the trouble: They allow methods to require specifically-named parameters when being invoked, for an added measure of security!</p>

<p style="text-align:center;"><img src="http://kamoh.github.io/images/keep_out.jpeg" title="Oh, you forgot to close your parentheses? Scram!" ></p>

<p style="text-align:center;"> <em>Source: <a href="https://www.flickr.com/photos/double_seven/4407285444/?rb=1">Flickr</a></em></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">speakeasy_knock</span><span class="p">(</span><span class="ss">password</span><span class="p">:</span> <span class="p">)</span>
</span><span class='line'>    <span class="s2">&quot;&#39;</span><span class="si">#{</span><span class="n">password</span><span class="si">}</span><span class="s2">&#39;? Good enough for me, come on in!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">speakeasy_knock</span>
</span><span class='line'>  <span class="c1">#=&gt; ArgumentError: missing keyword: password</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">speakeasy_knock</span><span class="p">(</span><span class="ss">password</span><span class="p">:</span> <span class="s2">&quot;Open up, chump!&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="c1">#=&gt; &quot;&#39;Open up, chump&#39;? Good enough for me, come on in!&quot; </span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, you&rsquo;ll need added security measures beyond just requiring the named parameter. But suddenly, having named parameters available as a tool starts to make sense.</p>

<p>Because standard arguments take input regardless of typing or designation, and because default arguments are fine not taking any input from the method call at all, requiring a named parameter for a method to function gives it a measure of protection against reckless usage.</p>

<p>To strain an already-exhausted metaphor, in certain use cases, named parameters can act exactly like locked doors that require code words in order to grant entry.</p>

<p style="text-align:center;"><img src="http://kamoh.github.io/images/62014/speakeasy.jpg" title="Hooray for named parameters and bootlegging, in no particular order!" ></p>

<p style="text-align:center;"> <em>Source: <a href="http://speakeasy216.com/">Speakeasy216</a></em></p>

<p>For more gory details about this and other functions introduced in Ruby 2.0.0, check out this substantial post by Marc-Andre Lafortune:
<a href="http://blog.marc-andre.ca/2013/02/23/ruby-2-by-example/">http://blog.marc-andre.ca/2013/02/23/ruby-2-by-example/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why Learn to Program?]]></title>
    <link href="http://kamoh.github.io/blog/2014/05/27/why-learn-to-program/"/>
    <updated>2014-05-27T10:10:07-04:00</updated>
    <id>http://kamoh.github.io/blog/2014/05/27/why-learn-to-program</id>
    <content type="html"><![CDATA[<p>Starting on the first week of June, I&rsquo;ll be starting as a web development student at the <a href="http://www.flatironschool.com">Flatiron School</a>. The course is full-time intensive, meeting every day from 9-6 for twelve weeks. Students enter as programming newbies and leave as employed, full-stack web developers.</p>

<p>Since graduating from college, I&rsquo;d been working in the video game industry as a designer and producer. So why the switch to programming?</p>

<p>I&rsquo;ve always been interested in how computers work. Though I&rsquo;ve long messed around with light coding, websites and scripting here and there over the past ten years, I&rsquo;ve never sat down to formally learn it (aside from two poorly-taught classes in high school and college). After a <a href="http://weatherlightus.tumblr.com/">friend of mine</a> went through Flatiron&rsquo;s program, his constant praise for the experience piqued my interest, and after getting accepted, I decided to go.</p>

<p>However, curiosity in programming is more than just a long-time interest. The world today runs on software, especially over the web. If you&rsquo;re able to not only understand how the web works, but capable of creating your own tools that leverage it, you wield immense power. I&rsquo;ve always valued being a creator over just being a consumer, and the knowledge I hope to gain from this class will push me even further to the former.</p>

<p>Over the course of the class, I&rsquo;ll be posting updates and thoughts in this blog. It&rsquo;s going to be an interesting summer.</p>
]]></content>
  </entry>
  
</feed>
